// Audit Logging Schema
// This file contains the database models for the audit system

model AuditLog {
  id           Int          @id @default(autoincrement())
  userId       Int?
  action       String
  resource     String
  resourceId   String?
  details      Json?
  metadata     Json?
  ipAddress    String?
  userAgent    String?
  timestamp    DateTime     @default(now())
  status       AuditStatus  @default(SUCCESS)
  errorMessage String?

  // Relations
  user User? @relation(fields: [userId], references: [id], onDelete: SetNull)

  @@index([userId])
  @@index([action])
  @@index([resource])
  @@index([timestamp])
  @@index([status])
  @@map("audit_logs")
}

enum AuditStatus {
  SUCCESS
  FAILED
  PENDING
}
